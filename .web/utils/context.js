import { createContext, useState } from "react"
import { Event, hydrateClientStorage, useEventLoop } from "/utils/state.js"

export const initialState = {"ability_grade_state": {"table_col": [{"title": "주제", "type": "str", "width": 120}, {"title": "목표", "type": "str", "width": 120}, {"title": "평가요소", "type": "str", "width": 120}, {"title": "역량", "type": "str", "width": 120}, {"title": "수준", "type": "str", "width": 120}, {"title": "입력", "type": "str", "width": 460}, {"title": "채점기준", "type": "str", "width": 660}], "table_data": [], "table_null": ["", "", "", "", "", "", ""]}, "current_page": "", "index_state": {"email": "", "show_c2a": true, "show_confetti": false, "signed_up": false}, "is_hydrated": false, "navbar_state": {"banner": true, "enter": false, "page_score": 0, "search_input": "", "search_modal": false, "show_form": false, "sidebar_open": false}, "router": {"session": {"client_token": "", "client_ip": "", "session_id": ""}, "headers": {"host": "", "origin": "", "upgrade": "", "connection": "", "pragma": "", "cache_control": "", "user_agent": "", "sec_websocket_version": "", "sec_websocket_key": "", "sec_websocket_extensions": "", "accept_encoding": "", "accept_language": ""}, "page": {"host": "", "path": "", "raw_path": "", "full_path": "", "full_raw_path": "", "params": {}}}, "state404": {"origin_url": ""}, "subjec_grade_state": {"table_col": [{"title": "주제", "type": "str", "width": 120}, {"title": "목표", "type": "str", "width": 120}, {"title": "평가요소", "type": "str", "width": 120}, {"title": "수준", "type": "str", "width": 120}, {"title": "채점기준", "type": "str", "width": 1240}], "table_data": [], "table_null": ["", "", "", "", ""]}, "subjec_oouput_state": {"table_ability_criteria_col": ["주제", "목표", "평가요소", "역량", "수준", "입력", "채점기준"], "table_ability_criteria_data": [["유니버셜디자인", "지식과이해", "여러 가지 힘 적용", "", "", "ㅁㅁㅁㅁㅁㅁㅁㅁㅁ"], ["유니버셜디자인", "탐구 및 설계", "힘을 이용한 문제 상황 선정", "지식정보처리 역량", "4", "ㅁㅁㅁ", "학습 기대치 이상의성과를 지속적으로 달성함."], ["유니버셜디자인", "탐구 및 설계", "힘을 이용한 문제 상황 선정", "지식정보처리 역량", "3", "ㅁㅁㅁ", "학습 기대치를 충족하여, 때로는 넘어서는 성과를 달성함."], ["유니버셜디자인", "탐구 및 설계", "힘을 이용한 문제 상황 선정", "지식정보처리 역량", "2", "ㅁㅁㅁ", "학습 기대치를 충족하기 위해 노력하고 있으며, 지속적으로 성장하고 있음."], ["유니버셜디자인", "탐구 및 설계", "힘을 이용한 문제 상황 선정", "지식정보처리 역량", "1", "ㅁㅁㅁ", "이해력 습득 초기 과정 중에 있거나 학습 기대치에 아직 도달하지 못함."]], "table_subject_concept_col": ["학년도", "학기", "학년", "교과", "단원(영역)", "성취기준"], "table_subject_concept_data": [["2023", "1", "1", "과학", "지권의 변화", "[9과01-01] 지구계의 구성 요소를 알고, 지권의 층상 구조와 그 특징을 설명할 수 있다."], ["2023", "2", "1", "과학", "여러 가지 힘", "[9과01-02] 지각을 이루는 암석을 생성 과정에 따라 분류할 수 있으며, 암석의 순환 과정을 설명할 수 있다."], ["2023", "3", "1", "과학", "여러 가지 힘", "[9과01-02] 지각을 이루는 암석을 생성 과정에 따라 분류할 수 있으며, 암석의 순환 과정을 설명할 수 있다."]], "table_subject_criteria_col": ["주제", "목표", "평가요소", "수준", "채점기준"], "table_subject_criteria_data": [["유니버셜디자인", "지식과이해", "여러 가지 힘 적용", "1", "ㅁㅁㅁㅁㅁㅁㅁㅁㅁ"], ["유니버셜디자인", "지식과이해", "여러 가지 힘 적용", "2", "ㅁㅁㅁㅁㅁㅁㅁㅁㅁ"], ["유니버셜디자인", "지식과이해", "여러 가지 힘 적용", "3", "ㅁㅁㅁㅁㅁㅁㅁㅁㅁ"], ["유니버셜디자인", "지식과이해", "여러 가지 힘 적용", "4", "ㅁㅁㅁㅁㅁㅁㅁㅁㅁ"], ["유니버셜디자인", "탐구 및 설계", "힘을 이용한 문제 상황 선정", "1", "ㅁㅁㅁㅁㅁㅁㅁㅁㅁ"], ["유니버셜디자인", "탐구 및 설계", "힘을 이용한 문제 상황 선정", "2", "ㅁㅁㅁㅁㅁㅁㅁㅁㅁ"], ["유니버셜디자인", "탐구 및 설계", "힘을 이용한 문제 상황 선정", "3", "ㅁㅁㅁㅁㅁㅁㅁㅁㅁ"], ["유니버셜디자인", "탐구 및 설계", "힘을 이용한 문제 상황 선정", "4", "ㅁㅁㅁㅁㅁㅁㅁㅁㅁ"], ["유니버셜디자인", "탐구 및 설계", "문제 상황 개선", "1", "ㅁㅁㅁㅁㅁㅁㅁㅁㅁ"], ["유니버셜디자인", "탐구 및 설계", "문제 상황 개선", "2", "ㅁㅁㅁㅁㅁㅁㅁㅁㅁ"], ["유니버셜디자인", "탐구 및 설계", "문제 상황 개선", "3", "ㅁㅁㅁㅁㅁㅁㅁㅁㅁ"], ["유니버셜디자인", "탐구 및 설계", "문제 상황 개선", "4", "ㅁㅁㅁㅁㅁㅁㅁㅁㅁ"], ["유니버셜디자인", "처리 및 평가", "유니버셜디자인 아이디어 투자 설명회", "1", "ㅁㅁㅁㅁㅁㅁㅁㅁㅁ"], ["유니버셜디자인", "처리 및 평가", "유니버셜디자인 아이디어 투자 설명회", "2", "ㅁㅁㅁㅁㅁㅁㅁㅁㅁ"], ["유니버셜디자인", "처리 및 평가", "유니버셜디자인 아이디어 투자 설명회", "3", "ㅁㅁㅁㅁㅁㅁㅁㅁㅁ"], ["유니버셜디자인", "처리 및 평가", "유니버셜디자인 아이디어 투자 설명회", "4", "ㅁㅁㅁㅁㅁㅁㅁㅁㅁ"], ["유니버셜디자인", "처리 및 평가", "유니버셜디자인 제안서 작성", "1", "ㅁㅁㅁㅁㅁㅁㅁㅁㅁ"], ["유니버셜디자인", "처리 및 평가", "유니버셜디자인 제안서 작성", "2", "ㅁㅁㅁㅁㅁㅁㅁㅁㅁ"], ["유니버셜디자인", "처리 및 평가", "유니버셜디자인 제안서 작성", "3", "ㅁㅁㅁㅁㅁㅁㅁㅁㅁ"], ["유니버셜디자인", "처리 및 평가", "유니버셜디자인 제안서 작성", "4", "ㅁㅁㅁㅁㅁㅁㅁㅁㅁ"], ["유니버셜디자인", "탐구 및 설계", "힘을 이용한 문제 상황 선정", "1", "ㅁㅁㅁㅁㅁㅁㅁㅁㅁ"], ["유니버셜디자인", "탐구 및 설계", "힘을 이용한 문제 상황 선정", "2", "ㅁㅁㅁㅁㅁㅁㅁㅁㅁ"], ["유니버셜디자인", "탐구 및 설계", "힘을 이용한 문제 상황 선정", "3", "ㅁㅁㅁㅁㅁㅁㅁㅁㅁ"], ["유니버셜디자인", "탐구 및 설계", "힘을 이용한 문제 상황 선정", "4", "ㅁㅁㅁㅁㅁㅁㅁㅁㅁ"], ["유니버셜디자인", "지식과이해", "여러 가지 힘 적용", "1", "ㅁㅁㅁㅁㅁㅁㅁㅁㅁ"], ["유니버셜디자인", "지식과이해", "여러 가지 힘 적용", "2", "ㅁㅁㅁㅁㅁㅁㅁㅁㅁ"], ["유니버셜디자인", "지식과이해", "여러 가지 힘 적용", "3", "ㅁㅁㅁㅁㅁㅁㅁㅁㅁ"], ["유니버셜디자인", "지식과이해", "여러 가지 힘 적용", "4", "ㅁㅁㅁㅁㅁㅁㅁㅁㅁ"], ["유니버셜디자인", "탐구 및 설계", "힘을 이용한 문제 상황 선정", "1", "ㅁㅁㅁㅁㅁㅁㅁㅁㅁ"], ["유니버셜디자인", "탐구 및 설계", "힘을 이용한 문제 상황 선정", "2", "ㅁㅁㅁㅁㅁㅁㅁㅁㅁ"], ["유니버셜디자인", "탐구 및 설계", "힘을 이용한 문제 상황 선정", "3", "ㅁㅁㅁㅁㅁㅁㅁㅁㅁ"], ["유니버셜디자인", "탐구 및 설계", "힘을 이용한 문제 상황 선정", "4", "ㅁㅁㅁㅁㅁㅁㅁㅁㅁ"], ["유니버셜디자인", "지식과이해", "여러 가지 힘 적용", "1", "ㅁㅁㅁㅁㅁㅁㅁㅁㅁ"], ["유니버셜디자인", "지식과이해", "여러 가지 힘 적용", "2", "ㅁㅁㅁㅁㅁㅁㅁㅁㅁ"], ["유니버셜디자인", "지식과이해", "여러 가지 힘 적용", "3", "ㅁㅁㅁㅁㅁㅁㅁㅁㅁ"], ["유니버셜디자인", "지식과이해", "여러 가지 힘 적용", "4", "ㅁㅁㅁㅁㅁㅁㅁㅁㅁ"], ["유니버셜디자인", "탐구 및 설계", "힘을 이용한 문제 상황 선정", "1", "ㅁㅁㅁㅁㅁㅁㅁㅁㅁ"], ["유니버셜디자인", "탐구 및 설계", "힘을 이용한 문제 상황 선정", "2", "ㅁㅁㅁㅁㅁㅁㅁㅁㅁ"], ["유니버셜디자인", "탐구 및 설계", "힘을 이용한 문제 상황 선정", "3", "ㅁㅁㅁㅁㅁㅁㅁㅁㅁ"], ["유니버셜디자인", "탐구 및 설계", "힘을 이용한 문제 상황 선정", "4", "ㅁㅁㅁㅁㅁㅁㅁㅁㅁ"]]}, "subjec_state": {"table_col": [{"title": "학년도", "type": "str", "width": 80}, {"title": "학기", "type": "str", "width": 80}, {"title": "학년", "type": "str", "width": 80}, {"title": "교과", "type": "str", "width": 80}, {"title": "단원(영역)", "type": "str", "width": 160}, {"title": "성취기준", "type": "str", "width": 1240}], "table_data": [], "table_null": ["", "", "", "", "", ""]}}

export const ColorModeContext = createContext(null);
export const StateContext = createContext(null);
export const EventLoopContext = createContext(null);
export const clientStorage = {"cookies": {}, "local_storage": {}}

export const initialEvents = () => [
    Event('state.hydrate', hydrateClientStorage(clientStorage)),
]

export const isDevMode = false

export function EventLoopProvider({ children }) {
  const [state, addEvents, connectError] = useEventLoop(
    initialState,
    initialEvents,
    clientStorage,
  )
  return (
    <EventLoopContext.Provider value={[addEvents, connectError]}>
      <StateContext.Provider value={state}>
        {children}
      </StateContext.Provider>
    </EventLoopContext.Provider>
  )
}